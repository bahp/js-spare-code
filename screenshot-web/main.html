<html>
<head>
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous">
    </script>
    <script src="html2canvas.js"></script>
</head>
<body>

    <!-- Button -->
    <div id="content>">
        <input type="text" id="url_value" name="url">
        <button onclick="capture()">Take screenshot!</button>
    </div>

    <br><br>

    <div id="capture"></div>

    <!--
    <div id="capture" style="padding: 10px; background: #f5da55">
        <h4 style="color: #000; ">Hello world!</h4>
    </div>
    -->

</body>
<script>


    function capture() {
        // Get url
        var url = document.getElementById("url_value").value;
        //
    }

    var REPOS = [
        {
            name: 'pyAMR',
            url: 'http://bahp.github.io/pyAMR/'
        },
        {
            name: 'pyAMR',
            url: 'http://bahp.github.io/pyAMR/'
        },
        {
            name: 'pyAMR',
            url: 'http://bahp.github.io/pyAMR/'
        },
    ]

    /*
    $(function() {


        // Log to see it is ready.
        console.log("Ready!" );

        // Loop
        for (let i = 0; i < REPOS.length; i++) {
            // Show information.
            console.log(REPOS[i].name, REPOS[i].url);

            // Open in new tab.
            window.open(REPOS[i].url, '_blank');

            // Add url.
            $('#capture').append(REPOS[i].url + '<br>')

            // Add img
            html2canvas(document.body).then(function(canvas) {
                document.body.appendChild(canvas);
            });

            //var canvas = document.getElementById("mycanvas");
            //var img = canvas.toDataURL("image/png");
            //document.write('<img src="' + img + '"/>');



            fetch(REPOS[i].url, {
                mode: 'no-cors'
            }).then(res =>
                console.log(res))
              .catch(err => alert(err));

            $.ajax({
                type: "GET",
                url: REPOS[i].name,
                crossDomain: true,
                //context: document.body
                success: function (data) {
                    console.log(data);
                }
            })
        }

    });
    */
    /*





    function screenshot2() {



        //var canvas = document.getElementById("mycanvas");
        //var img = canvas.toDataURL("image/png");
        //document.write('<img src="' + img + '"/>');

        html2canvas(document.querySelector("body")).then(canvas => {
            //document.body.appendChild(canvas)
            document.getElementById("capture").appendChild(canvas)

            //var canvas = document.getElementById("mycanvas");
            //var img = canvas.toDataURL("image/png");
            //document.write('<img src="' + img + '"/>');

        });

        /*
        const screenshotTarget = document.body;

        html2canvas(screenshotTarget).then((canvas) => {
            const base64image = canvas.toDataURL("image/png");
            window.location.href = base64image;

            consle.log("WHAT!")
        });

    }
    /*
     */


    function screenshot() {

        // System
        var system = require('system');

        // Web Address (URL) of the page to capture
        var url = "https://www.google.com"

        // File name of the captures image
        var file = 'screenshot.png';

        // Create webpage
        var page = require('webpage').create();

        // Browser size - height and width in pixels
        // Change the viewport to 480x320 to emulate the iPhone
        page.viewportSize = { width: 1200, height: 800 };

        // Set the User Agent String
        // You can change it to iPad or Android for mobile screenshots
        page.settings.userAgent =
          'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5';

        // Render the screenshot image
        page.open(url, function (status) {
          if (status !== 'success') {
            console.log('Could not open web page : ' + url);
            phantom.exit();
          } else {
            window.setTimeout(function () {
              page.render(file);
              console.log('Download the screenshot : ' + file);
              phantom.exit();
            }, 1000);
          }
        });
    };
</script>
</html>